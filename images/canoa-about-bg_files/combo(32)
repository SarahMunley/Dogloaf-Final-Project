YUI.add("hermes-template-album-page",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return u((n.outlet||t&&t.outlet||o).call(s,t!=null?t["global-nav-view"]:t,{name:"outlet",hash:{},data:i}))+'\n\n<div role="main" class="album-container fluid-centered">\n	'+u((n.outlet||t&&t.outlet||o).call(s,t!=null?t["album-toolbar-view"]:t,{name:"outlet",hash:{},data:i}))+"\n	"+u((n.outlet||t&&t.outlet||o).call(s,t!=null?t["album-header-view"]:t,{name:"outlet",hash:{},data:i}))+"\n	"+u((n.outlet||t&&t.outlet||o).call(s,t!=null?t["photo-list-view"]:t,{name:"outlet",hash:{},data:i}))+"\n	"+u((n.outlet||t&&t.outlet||o).call(s,t!=null?t["pagination-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n</div>\n"+u((n.outlet||t&&t.outlet||o).call(s,t!=null?t["signup-footer-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"+u((n.outlet||t&&t.outlet||o).call(s,t!=null?t["footer-full-view"]:t,{name:"outlet",hash:{},data:i}))},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/album-page",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-dynamic-page-head",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return'<meta name="title" content="'+e.escapeExpression((s=(s=n.title||(t!=null?t.title:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"title",hash:{},data:i}):s))+'" data-dynamic="true">'},3:function(e,t,n,r,i){return'<meta name="description" content="'+e.escapeExpression((n.stripTags||t&&t.stripTags||n.helperMissing).call(t!=null?t:{},t!=null?t.description:t,{name:"stripTags",hash:{},data:i}))+'" data-dynamic="true">'},5:function(e,t,n,r,i){var s;return'<meta property="og:title" content="'+e.escapeExpression((s=(s=n.title||(t!=null?t.title:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"title",hash:{},data:i}):s))+'" data-dynamic="true">'},7:function(e,t,n,r,i){return'<meta property="og:description" content="'+e.escapeExpression((n.stripTags||t&&t.stripTags||n.helperMissing).call(t!=null?t:{},t!=null?t.description:t,{name:"stripTags",hash:{},data:i}))+'" data-dynamic="true">'},9:function(e,t,n,r,i){var s;return'<meta property="og:type" content="flickr_photos:'+e.escapeExpression((s=(s=n.flickrType||(t!=null?t.flickrType:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"flickrType",hash:{},data:i}):s))+'" data-dynamic="true">'},11:function(e,t,n,r,i){var s;return'<meta property="og:type" content="'+e.escapeExpression((s=(s=n.ogType||(t!=null?t.ogType:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"ogType",hash:{},data:i}):s))+'" data-dynamic="true">'},13:function(e,t,n,r,i){var s;return'<meta property="og:url" content="'+e.escapeExpression((s=(s=n.fullURL||(t!=null?t.fullURL:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"fullURL",hash:{},data:i}):s))+'" data-dynamic="true">'},15:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'<meta property="og:image" content="'+f((s=(s=n.openGraphImageURL||(t!=null?t.openGraphImageURL:t))!=null?s:u,typeof s===a?s.call(o,{name:"openGraphImageURL",hash:{},data:i}):s))+'" data-dynamic="true">\n<meta property="og:image:width" content="'+f((s=(s=n.openGraphaImageWidth||(t!=null?t.openGraphaImageWidth:t))!=null?s:u,typeof s===a?s.call(o,{name:"openGraphaImageWidth",hash:{},data:i}):s))+'" data-dynamic="true">\n<meta property="og:image:height" content="'+f((s=(s=n.openGraphaImageHeight||(t!=null?t.openGraphaImageHeight:t))!=null?s:u,typeof s===a?s.call(o,{name:"openGraphaImageHeight",hash:{},data:i}):s))+'" data-dynamic="true">\n'},17:function(e,t,n,r,i){return'<link rel="openid2.provider" href="https://open.login.yahooapis.com/openid/op/auth" data-dynamic="true"/>'},19:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'<meta property="flickr_photos:'+f((s=(s=n.byPrefix||(t!=null?t.byPrefix:t))!=null?s:u,typeof s===a?s.call(o,{name:"byPrefix",hash:{},data:i}):s))+'by" content="'+f((s=(s=n.domain||(t!=null?t.domain:t))!=null?s:u,typeof s===a?s.call(o,{name:"domain",hash:{},data:i}):s))+f((s=(s=n.ownerURL||(t!=null?t.ownerURL:t))!=null?s:u,typeof s===a?s.call(o,{name:"ownerURL",hash:{},data:i}):s))+'" data-dynamic="true">'},21:function(e,t,n,r,i){var s;return'<meta property="al:ios:url" content="flickr://flickr.com'+e.escapeExpression((s=(s=n.url||(t!=null?t.url:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"url",hash:{},data:i}):s))+'" data-dynamic="true">'},23:function(e,t,n,r,i){var s;return'<meta property="twitter:card" content="'+e.escapeExpression((s=(s=n.twitterCardType||(t!=null?t.twitterCardType:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"twitterCardType",hash:{},data:i}):s))+'" data-dynamic="true">'},25:function(e,t,n,r,i){return'<meta property="twitter:description" content="'+e.escapeExpression((n.stripTags||t&&t.stripTags||n.helperMissing).call(t!=null?t:{},t!=null?t.description:t,{name:"stripTags",hash:{},data:i}))+'" data-dynamic="true">'},27:function(e,t,n,r,i){var s;return'<meta property="twitter:app:url:iphone" content="flickr://flickr.com'+e.escapeExpression((s=(s=n.url||(t!=null?t.url:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"url",hash:{},data:i}):s))+'" data-dynamic="true">'},29:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'<meta property="'+f((s=(s=n.property||(t!=null?t.property:t))!=null?s:u,typeof s===a?s.call(o,{name:"property",hash:{},data:i}):s))+'" content="https:'+f((s=(s=n.content||(t!=null?t.content:t))!=null?s:u,typeof s===a?s.call(o,{name:"content",hash:{},data:i}):s))+'" data-dynamic="true">'},31:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return'<link rel="alternate" type="application/atom+xml" '+((s=n["if"].call(u,t!=null?t.title:t,{name:"if",hash:{},fn:e.program(32,i,0),inverse:e.noop,data:i}))!=null?s:"")+' href="'+e.escapeExpression((o=(o=n.url||(t!=null?t.url:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"url",hash:{},data:i}):o))+'" data-dynamic="true">'},32:function(e,t,n,r,i){var s;return'title="'+e.escapeExpression((s=(s=n.title||(t!=null?t.title:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"title",hash:{},data:i}):s))+'"'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return((s=n["if"].call(o,t!=null?t.title:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,t!=null?t.description:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n\n"+((s=n["if"].call(o,t!=null?t.title:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,t!=null?t.description:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,t!=null?t.flickrType:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data
:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,t!=null?t.ogType:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,t!=null?t.fullURL:t,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,t!=null?t.openGraphImageURL:t,{name:"if",hash:{},fn:e.program(15,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,t!=null?t.openId:t,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,t!=null?t.ownerURL:t,{name:"if",hash:{},fn:e.program(19,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,t!=null?t.url:t,{name:"if",hash:{},fn:e.program(21,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n\n"+((s=n["if"].call(o,t!=null?t.twitterCardType:t,{name:"if",hash:{},fn:e.program(23,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,t!=null?t.description:t,{name:"if",hash:{},fn:e.program(25,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(o,t!=null?t.url:t,{name:"if",hash:{},fn:e.program(27,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n.each.call(o,t!=null?t.twitterImages:t,{name:"each",hash:{},fn:e.program(29,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n\n"+((s=n.each.call(o,t!=null?t.feeds:t,{name:"each",hash:{},fn:e.program(31,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/dynamic-page-head",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-album-toolbar",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'		<a class="edit-in-organizr" href="/photos/organize/?start_tab=one_set'+a((s=(s=n.setId||(t!=null?t.setId:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"setId",hash:{},data:i}):s))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"album-page.EDIT_IN_ORGANIZR"},data:i}))+"</a>\n"},3:function(e,t,n,r,i){return" selected"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<div class="album-toolbar-content">\n	<a class="back-to-albums" href="/photos/'+l((o=(o=n.nsidOrPathAlias||(t!=null?t.nsidOrPathAlias:t))!=null?o:a,typeof o===f?o.call(u,{name:"nsidOrPathAlias",hash:{},data:i}):o))+"/albums/with/"+l((o=(o=n.setId||(t!=null?t.setId:t))!=null?o:a,typeof o===f?o.call(u,{name:"setId",hash:{},data:i}):o))+'">\n		<span class="back-to-albums-icon"></span>\n		<span class="back-to-albums-text">\n			'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"album-page.BACK_TO_ALBUMS"},data:i}))+"\n		</span>\n	</a>\n"+((s=n["if"].call(u,t!=null?t.viewerIsOwner:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"	"+l((n.outlet||t&&t.outlet||a).call(u,t!=null?t["fluid-magic-slideshow-view"]:t,{name:"outlet",hash:{},data:i}))+'\n	<button data-layout="justified" class="layout justified'+((s=n["if"].call(u,t!=null?t.isJustifiedLayout:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"></button>\n	<button data-layout="story" class="layout story'+((s=n["if"].call(u,t!=null?t.isStoryLayout:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"></button>\n</div>\n'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/album-toolbar",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-magic-slideshow",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return" disabled"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<a href="#" class="slideshow-toggle'+((s=n.unless.call(o,t!=null?t.isEnabled:t,{name:"unless",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" title="'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"common.TOGGLE_SLIDESHOW"},data:i}))+'" tabindex="-1"><span></span></a>\n'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-magic-slideshow",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-slideshow",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return" no-click"},3:function(e,t,n,r,i){return" is-hidden"},5:function(e,t,n,r,i){return" is-video"},7:function(e,t,n,r,i){var s;return e.escapeExpression((s=(s=n["prev-url"]||(t!=null?t["prev-url"]:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"prev-url",hash:{},data:i}):s))},9:function(e,t,n,r,i){return"#"},11:function(e,t,n,r,i){var s;return e.escapeExpression((s=(s=n["next-url"]||(t!=null?t["next-url"]:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"next-url",hash:{},data:i}):s))},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["photo-well-view"]:t,{name:"outlet",hash:{},data:i}))+'\n<a class="playpause chrome" data-track="playpauseClick"><span class="pause-button"></span><span class="play-button"></span><div class="timer"></div></a>\n\n<a class="navigate-target chrome navigate-prev'+((s=n["if"].call(o,t!=null?t["prev-is-not-clickable"]:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t["is-hidden"]:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t["is-video"]:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" href="'+((s=n["if"].call(o,t!=null?t["prev-url"]:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.program(9,i,0),data:i}))!=null?s:"")+'" data-track="prevPhotoButtonClick" data-direction="prev"><span class="navigate-target-arrow"></span></a>\n\n<a class="navigate-target chrome navigate-next'+((s=n["if"].call(o,t!=null?t["next-is-not-clickable"]:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t["is-hidden"]:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t["is-video"]:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" href="'+((s=n["if"].call(o,t!=null?t["next-url"]:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.program(9,i,0),data:i}))!=null?s:"")+'" data-track="nextPhotoButtonClick" data-direction="next"><span class="navigate-target-arrow"></span></a>\n\n<a class="close chrome" data-track="closeClick"><span></span></a>\n'+a((n.outlet||t&&t.outlet||u).call(o,t!=null?t["slideshow-attribution-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/slideshow",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-attribution",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'	<a class="avatar person medium no-menu" data-person-nsid="'+f((s=(s=n.nsid||(t!=null?t.nsid:t))!=null?s:u,typeof s===a?s.call(o,{name:"nsid",hash:{},data:i}):s))+'" style="background-image: url('+f((s=(s=n.buddyicon||(t!=null?t.buddyicon:t))!=null?s:u,typeof s===a?s.call(o,{name:"buddyicon",hash:{},data:i}):s))+');" href="/photos/'+f((s=(s=n.pathAlias||(t!=null?t.pathAlias:t))!=null?s:u,typeof s===a?s.call(o,{name:"pathAlias",hash:{},data:i}):s))+'/"></a>\n'},3:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'	<div class="avatar person medium" data-person-nsid="'+f((s=(s=n.nsid||(t!=null?t.nsid:t))!=null?s:u,typeof s===a?s.call(o,{name:"nsid",hash:{},data:i}):s))+'" style="background-image: url('+f((s=(s=n.buddyicon||(t!=null?t.buddyicon:t))!=null?s:u,typeof s===a?s.call(o,{name:"buddyicon",hash:{},data:i}):s))+');" tabindex="0"></div>\n'},5:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.isPro:t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))!=null?s:""},6:function(e,t,n,r,i){return'		<a href="/account/upgrade/pro" class="pro-badge-inline">PRO</a>\n'},8:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.isPro:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:""},9:function(e,t,n,r,i){return'			<a href="/account/upgrade/pro" class="pro-badge-inline">PRO</a>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return((s=n["if"].call(u,t!=null?t.noMenu:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+"\n"+((s=n.unless.call(u,t!=null?t.isAlbumView:t,{name:"unless",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n<div class="attribution-info">\n\n	<a href="/photos/'+l((o=(o=n.pathAlias||(t!=null?t.pathAlias:t))!=null?o:a,typeof o===f?o.call(u,{name:"pathAlias",hash:{},data:i}):o))+'/" class="owner-name truncate" title="'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{name:t!=null?t.displayname:t,intlName:"attribution.GO_TO_PHOTOSTREAM"},data:i}))+'" data-track="attributionNameClick">'+l((o=(o=n.displayname||(t!=null?t.displayname:t))!=null?o:a,typeof o===f?o.call(u,{name:"displayname",hash:{},data:i}):o))+'</a>\n	<a href="/photos/'+l((o=(o=n.pathAlias||(t!=null?t.pathAlias:t))!=null?o:a,typeof o===f?o.call(u,{name:"pathAlias",hash:{},data:i}):o))+'/" class="owner-name-with-by truncate" title="'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{name:t!=null?t.displayname:t,intlName:"attribution.GO_TO_PHOTOSTREAM"},data:i}))+'" data-track="attributionNameClick">'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{user:t!=null?t.displayname:t,intlName:"attribution.BY_USER"},data:i}))+"</a>\n\n	"+l((n.outlet||t&&t.outlet||a).call(u,t!=null?t["follow-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n"+((s=n["if"].call(u,t!=null?t.isAlbumView:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/attribution",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("slideshow-attribution-view",function(e,t){var n=require("lib/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){this.set("isActiveViewAgnostic",e.isActiveViewAgnostic);var t=e.collection.getList()[e.position];return t&&(this.nsid=e.nsid=t.getValue("owner").getValue("nsid")),this.realFullscreen=!0,this},langBundles:this.details.langBundles,subviewConfig:{"follow-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,isActiveViewAgnostic:!0,isFluid:!0,isOnDark:!0}},loadState:function(){var e=this;if(this.nsid)return this.appContext.getModel("person-models",this.nsid).then(function(t){e.set("owner",t)});throw new Error("missing nsid")},buildContainer:function(){var e=this.get("owner"),t=this.appContext.getViewer().nsid,n=e.getValue("pathAlias")||e.getValue("nsid"),r;return r=e.getValue("buddyicon").large?e.getValue("buddyicon").large:e.getValue("buddyicon")["default"],this.setContainerWithTemplate("attribution",{pathAlias:n,buddyicon:r,nsid:e.getValue("nsid"),noMenu:!0,displayname:e.getValue("displayname"),follow:this.subviews["follow-view"]?this.subviews["follow-view"].get("container"):"",realFullscreenEnabled:this.realFullscreen&&this.appContext.experiments.fullscreen.getMode()}),t===e.getValue("nsid")&&this.get("container").addClass("is-self"),this},activate:function(){return this.registerEventHandler(e.on("personMenuOpen",this.handlePersonMenuOpen.bind(this))),this.registerEventHandler(e.on("personMenuClose",this.handlePersonMenuClose.bind(this))),this},handlePersonMenuOpen:function(e){this.fire("subviewViewEvent","personMenuOpen")},handlePersonMenuClose:function(e){this.fire("subviewViewEvent","personMenuClose")},onParentViewEvent:function(e,t){var r,i=this,s;t&&t[0]&&(r=t[0],r==="slideshowView:newPhoto"?t[1]&&(s=t[1].getValue("owner").getValue("nsid"),s!==this.nsid&&(this.nsid=s,this.set("owner",t[1].getValue("owner")),this.subviews["follow-view"]&&this.subviews["follow-view"].destroy({remove:!0}),this.instantiateSubview("follow-view",{nsid:s,realFullscreen:!0,isActiveViewAgnostic:!0,isFluid:!0,isOnDark:!0}).then(function(e){return e.initialize()}).then(function(e){i.buildContainer(),i.get("container").one(".follow-view").addClass("is-real-fullscreen photo-attribution"),e.normalizedActivate()}).catch(function(e){n.error("Error loading follow-view",{err:e})}))):r==="slideshowView:preloadPhoto"&&(s=t[1].getValue("owner").getValue("nsid"),s!==this.nsid&&i.appContext.getModel("person-relationship-models",{id:s})))}})},"@VERSION@",{requires:["flickr-view","hermes-template-attribution"],optional:["person-models"],langBundles:["attribution"]});
YUI.add("hermes-lang-attribution",function(e,t){e.Intl.add("hermes/attribution","en-US",{FOLLOW:["Follow"],FOLLOWING:["Following"],ERROR_SETTING_FRIEND:["There was a problem setting your friend relationship"],ERROR_SETTING_FAMILY:["There was a ",{type:"number",valueName:"POPULATION",format:"integer"}," problem setting your family relationship"],FRIEND:["Friend"],FAMILY:["Family"],UNFOLLOW:["Unfollow"],GO_TO_PHOTOSTREAM:["Go to ","${name}","'s photostream"],BY_USER:["By: ","${user}"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-photo-well-media-scrappy",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=t!=null?t:{};return'	<div class="restricted-interstitial">\n		<div class="restricted-interstitial-message">\n			<h2>'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADULT_CONTENT"},data:i}))+"</h2>\n"+((s=n["if"].call(o,t!=null?t.isSignedIn:t,{name:"if",hash:{},fn:e.program(2,i,0),inverse:e.program(5,i,0),data:i}))!=null?s:"")+"		</div>\n	</div>\n"},2:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return"				<p>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.MATURE_AUDIENCES"},data:i}))+"<br />"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.USER_DISCRETION"},data:i}))+"</p>\n\n"+((s=n.unless.call(o,t!=null?t.isMinor:t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")},3:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return"					<p><button class='ui-button'><span>"+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SHOW_ME_THIS_CONTENT_TYPE"},data:i}))+"</span></button></p>\n					<p>"+u((n.intlHTMLMessage||t&&t.intlHTMLMessage||o).call(s,{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.CHANGE_SAFE_SEARCH_IN_SETTINGS"},data:i}))+"</p>\n"},5:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return"				<p>"+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SIGNED_IN_FOR_CONTENT"},data:i}))+' <a href="//'+a((s=(s=n.host||(t!=null?t.host:t))!=null?s:u,typeof s=="function"?s.call(o,{name:"host",hash:{},data:i}):s))+'/signin/" data-track="photoWellSignInClick">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:i}))+"</a></p>\n"},7:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.isVideo:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.program(11,i,0),data:i}))!=null?s:""},8:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.isPending:t,{name:"if",hash:{},fn:e.noop,inverse:e.program(9,i,0),data:i}))!=null?s:""},9:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'		<div class="videoplayer main-photo" style="width:'+f((s=(s=n.width||(t!=null?t.width:t))!=null?s:u,typeof s===a?s.call(o,{name:"width",hash:{},data:i}):s))+"px; height:"+f((s=(s=n.height||(t!=null?t.height:t))!=null?s:u,typeof s===a?s.call(o,{name:"height",hash:{},data:i}):s))+'px;"><video id="video_1" poster="'+f((s=(s=n.src||(t!=null?t.src:t))!=null?s:u,typeof s===a?s.call(o,{name:"src",hash:{},data:i}):s))+'" class="video-js vjs-big-play-centered inherit-size"></video></div>\n'},11:function(e,t,n,r,i){var s;return"\n"+((s=n["if"].call(t!=null?t:{},t!=null?t.showFuzzy:t,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.program(14,i,0),data:i}))!=null?s:"")},12:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'		<span class="restricted-image main-photo" style="width:'+f((s=(s=n.width||(t!=null?t.width:t))!=null?s:u,typeof s===a?s.call(o,{name:"width",hash:{},data:i}):s))+"px;height:"+f((s=(s=n.height||(t!=null?t.height:t))!=null?s:u,typeof s===a?s.call(o,{name:"height",hash:{},data:i}):s))+'px;">\n		</span>\n'},14:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a="function",f=e.escapeExpression;return'		<span class="facade-of-protection-neue" style="width:'+f((s=(s=n.width||(t!=null?t.width:t))!=null?s:u,typeof s===a?s.call(o,{name:"width",hash:{},data:i}):s))+"px;height:"+f((s=(s=n.height||(t!=null?t.height:t))!=null?s:u,typeof s===a?s.call(o,{name:"height",hash:{},data:i}):s))+'px;">\n			'+f((n.outlet||t&&t.outlet||u).call(o,t!=null?t["zoom-view"]:t,{name:"outlet",hash:{},data:i}))+"\n			"+f((n.outlet||t&&t.outlet||u).call(o,t!=null?t["vr-overlay-view"]:t,{name:"outlet",hash:{},data:i}))+'\n		</span>\n\n		<img width="'+f((s=(s=n.width||(t!=null?t.width:t))!=null?s:u,typeof s===a?s.call(o,{name:"width",hash:{},data:i}):s))+'" height="'+f((s=(s=n.height||(t!=null?t.height:t))!=null?s:u,typeof s===a?s.call(o,{name:"height",hash:{},data:i}):s))+'" src="'+f((s=(s=n.src||(t!=null?t.src:t))!=null?s:u,typeof s===a?s.call(o,{name:"src",hash:{},data:i}):s))+'" class="low-res-photo" alt="'+f((s=(s=n.imgAltText||(t!=null?t.imgAltText:t))!=null?s:u,typeof s===a?s.call(o,{name:"imgAltText",hash:{},data:i}):s))+'">\n		<img width="'+f((s=(s=n.width||(t!=null?t.width:t))!=null?s:u,typeof s===a?s.call(o,{name:"width",hash:{},data:i}):s))+'" height="'+f((s=(s=n.height||(t!=null?t.height:t))!=null?s:u,typeof s===a?s.call(o,{name:"height",hash:{},data:i}):s))+'" src="'+f((s=(s=n.highResSrc||(t!=null?t.highResSrc:t))!=null?s:u,typeof s===a?s.call(o,{name:"highResSrc",hash:{},data:i}):s))+'" class="main-photo is-hidden" alt="'+f((s=(s=n.imgAltText||(t!=null?t.imgAltText:t))!=null?s:u,typeof s===a?s.call(o,{name:"imgAltText",hash:{},data:i}):s))+'">\n		<script nonce="'+f((s=(s=n.cspNonce||(t!=null?t.cspNonce:t))!=null?s:u,typeof s===a?s.call(o,{name:"cspNonce",hash:{},data:i}):s))+"\">\n		var img = document.querySelector('.photo-well-media-scrappy-view img.main-photo');\n		img.onload = function () { registerFirstPhoto(img); };\n		</script>\n		<noscript>\n			<img width=\""+f((s=(s=n.width||(t!=null?t.width:t))!=null?s:u,typeof s===a?s.call(o,{name:"width",hash:{},data:i}):s))+'" height="'+f((s=(s=n.height||(t!=null?t.height:t))!=null?s:u,typeof s===a?s.call(o,{name:"height",hash:{},data:i}):s))+'" src="'+f((s=(s=n.highResSrc||(t!=null?t.highResSrc:t))!=null?s:u,typeof s===a?s.call(o,{name:"highResSrc",hash:{},data:i}):s))+'" class="main-photo" alt="'+f((s=(s=n.imgAltText||(t!=null?t.imgAltText:t))!=null?
s:u,typeof s===a?s.call(o,{name:"imgAltText",hash:{},data:i}):s))+'">\n		</noscript>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.needsInterstitial:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(7,i,0),data:i}))!=null?s:""},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-well-media-scrappy",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("slideshow-well-view",function(e,t){var n=require("lib/flog")(t),r=500,i=500;e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){var t=e.collection.getList()[e.position];if(!t)throw new Error("missing photo");return this.set("photo",t),this.set("isActiveViewAgnostic",!0),this.set("canvasSizeIsDirty",!0),this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},buildContainer:function(){var e=this,t=this.get("photo"),r,i;return e.preloadImage&&(e.preloadImage.onload=null),this.appContext.forceServerRender?(r=this.getPhotoForDisplay(t,{canvas:{width:Number.MAX_VALUE,height:Number.MAX_VALUE}}),i=r):(r=this.getPhotoForDisplay(t),i=this.getPhotoForDisplay(t,{includeSizes:["sq","q","t","s","n"]})),this.setContainerWithTemplate("photo-well-media-scrappy",{width:r.width,height:r.height,src:i.url,highResSrc:r.url,showFuzzy:t.getValue("needsInterstitial"),isSignedIn:this.appContext.getViewer().signedIn,isVideo:!1}),YUI.Env.isServer?(this.serverWidth=r.width,this.serverHeight=r.height):t.getValue("needsInterstitial")||this.preloadPhoto(t).then(function(){var t=e.get("container").one(".low-res-photo"),n=e.get("container").one(".main-photo");n&&n.removeClass("is-hidden").show(),t&&t.hide()}).catch(function(e){n.error("Error building slideshow",{err:e})}),this},preloadPhoto:function(t){var n=this;return new e.Promise(function(e,r){return n.generatePhotoElement(t,e,r)})},generateFuzzyElement:function(e){var t,n;return t=this.getPhotoForDisplay(e),n=document.createElement("span"),n.style.width=t.width+"px",n.style.height=t.height+"px",n},generatePhotoElement:function(t,n,r){var i,s;return i=this.getPhotoForDisplay(t),s=new Image,s.src=i.url,s.width=i.width,s.height=i.height,s.complete&&n&&typeof n=="function"&&n(t),s=e.one(s),n&&typeof n=="function"&&s.once("load",function(){n(t),s.detachAll(),s=undefined}),r&&typeof r=="function"&&s.once("error",function(){r(t),s.detachAll(),s=undefined}),s},handlePhotoLoaded:function(e){this.fire("subviewViewEvent","photoLoaded"),e.getValue("isOwner")||this.appContext.getViewCounter().queue(e.getValue("id"),this.appContext.getReferrer())},swapPhoto:function(t,n){var r,i,s;s=this.get("container").one(".restricted-image"),s&&(i=!0),t.getValue("needsInterstitial")?(r=this.generateFuzzyElement(t),r.className="main-photo outro restricted-image",r=e.one(r),s=this.get("container").one(".main-photo"),n||(s.once("transitionend",function(){s.detach(),s&&s.remove(!0),s=undefined}),s.removeClass("main-photo"),s.removeClass("intro"),s.addClass("outro"),r.removeClass("outro"),r.addClass("intro")),s.insert(r,"before"),n&&(r.removeClass("outro"),s.remove(!0)),this.fire("subviewViewEvent","photoLoaded")):(r=this.generatePhotoElement(t,this.handlePhotoLoaded.bind(this)),i||(s=this.get("container").one(".main-photo")),r.addClass("main-photo"),r.addClass("outro"),s&&s.removeClass("main-photo"),n?(r&&r.removeClass("outro"),s&&(s.insert(r,"before"),s.remove(!0))):(s&&(s.once("transitionend",function(){s.detachAll(),s&&s.remove(!0),s=undefined}),s.addClass("outro"),s.removeClass("intro"),s.insert(r,"before")),r&&(r.removeClass("outro"),r.addClass("intro"))))},onParentViewEvent:function(e,t){var n;if(t&&t[0]){n=t[0];switch(n){case"photoWellResized":this.get("photo").getValue("needsInterstitial")||this.buildContainer();break;case"slideshowView:newPhoto":t[1]&&(this.set("photo",t[1]),this.swapPhoto(t[1],t[2]));break;case"slideshowView:preloadPhoto":t[1]&&this.preloadPhoto(t[1]);break;default:}}},activate:function(){var t=this;return this.get("photo").getValue("needsInterstitial")||(this.registerEventHandler(e.on("flickr:photo-media-well-update",function(e){t.buildContainer()})),e.use("global-events",function(e){t.registerEventHandler(e.globalEvents.subscribe("window:resize",function(e){t.buildContainer()}))})),this.appContext.getViewer().signedIn&&this.appContext.getModel("person-preferences-models",t.appContext.auth.user.nsid).then(function(e){t.set("personPreferences",e),t.get("photo").getValue("needsInterstitial")&&!this.appContext.getViewer().isMinor&&t.registerEventHandler(t.get("container").one(".restricted-interstitial-message button").on("click",t.handleInterstitialDismissButtonClick,t))}),this},getPhotoForDisplay:function(e,t){var n=this.getCanvasSize(),r=this.getPixelRatio(),i,s,o,u=!0;return t&&t.canvasSize&&(n=t.canvasSize),i=e.getSizeToFit(n,t),s=n.height/r,u||(s=Math.min(s,i.height)),o=Math.min(n.width/r,i.width/i.height*s),s=Math.min(s,i.height/i.width*o),{width:Math.round(o),height:Math.round(s),url:i.url,pixelRatio:i.width/o}},getCanvasSize:function(){var t,n=this.getPixelRatio(),s,o={width:r,height:i};return this.get("canvasSizeIsDirty")?YUI.Env.isServer||(s=e.one("#content"),s&&(t=s.get("region"),t.height=e.config.win.innerHeight,t.width=e.config.win.innerWidth)):t=this.get("cachedCanvasSize"),this.appContext.viewportData.viewport.width>0&&(o={width:this.appContext.viewportData.viewport.width,height:this.appContext.viewportData.viewport.height-240}),t||(t={top:0,left:0,bottom:i,right:r,width:o.width,height:o.height}),t.height*=n,t.width*=n,t},getPixelRatio:function(){return this.appContext.getViewer().getPixelRatio()}},{})},"@VERSION@",{requires:["flickr-view","hermes-template-photo-well-media-scrappy"],langBundles:["common","photo-page-scrappy"]});
YUI.add("slideshow-view",function(e,t){var n=require("lib/flog")(t);e.namespace("Views").Slideshow=e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.set("isActiveViewAgnostic",!0),this.collection=e.collection,this.pageParams=e.pageParams||{perPage:20},this.pageParams.page=parseInt(e.pageNumber,10)||1,this.position=parseInt(e.position,10)||0;if(this.collection.totalItems<1)throw new Error("no items in collection");return this.get("container").getHTML()===""&&this.setContainerWithTemplate("flickr-balls"),this},subviewConfig:{"slideshow-attribution-view":{isActiveViewAgnostic:!0,requiredToShowOnClient:!1,requiredToShowOnServer:!1,additionalViewClasses:["is-real-fullscreen","photo-attribution","chrome"]},"slideshow-well-view":{isActiveViewAgnostic:!0,requiredToShowOnClient:!1,requiredToShowOnServer:!1,dealbreaker:!0}},loadState:function(){var e=this;return this.collection.getPage(this.pageParams).then(function(){var t=e.collection.getList(),r,i,s,o;o=t[e.position];if(!o)throw new Error("The starting photo does not exist.");r=parseInt(e.collection.totalItems,10),e.bufferPhotos(e.position,e.get("bufferSize")),i=r-1,s=e.position-1,s<0&&(s=i);if(!t[s])return e.pageParams.page=Math.ceil(s/e.pageParams.perPage),e.collection.getPage(e.pageParams).then(function(){e.bufferPhotos(e.position,e.get("bufferSize"),"prev")}).catch(function(e){n.error("Error fetching next page in collection",{err:e})})}).catch(function(t){n.error("Error initializing slideshow",{err:t}),e.close()})},buildContainer:function(){var e;return this.subviews["slideshow-attribution-view"]&&(e=this.subviews["slideshow-attribution-view"].get("container")),this.setContainerWithTemplate("slideshow",{"slideshow-attribution-view":e,"photo-well-view":this.subviews["slideshow-well-view"].get("container")}),this},freeze:function(){e.one("body").setStyles({overflow:"hidden"})},unfreeze:function(){e.one("body").setStyles({overflow:"visible"})},show:function(){var t=this,r=e.one("#content");return e.use("d3",function(){if(!r){n.error("Error initializing slideshow: missing content div");return}r.append(t.get("container")),t.get("enableFullscreen")&&(t.fullScreenManager=new e.fluid.Fullscreen,t.fullScreenManager.on("enterFullscreen",t.finishInitialization.bind(t)),t.fullScreenManager.enterFullscreen());try{t.initialize().then(function(){t.finishInitialization()}).catch(function(e){n.error("Error initializing slideshow",{err:e}),t.close()})}catch(i){n.error("Error initializing slideshow",{err:i}),t.close()}e.fire("flickr:setKeyEventScope",t.getKeyEventScope()),t.freeze()}),this},close:function(t){var n=this.get("container");e.fire("flickr:removeKeyEventScope",this.getKeyEventScope()),this.get("enableFullscreen")&&(this.fullScreenManager.exitFullscreen(),this.fullScreenManager.destroy()),n&&n.remove(!0),this.unfreeze(),this.fire("close",t),clearTimeout(this.mouseMoveTimer),clearTimeout(this.initialFadeTimer),clearTimeout(this.timer),clearTimeout(this.movingFadeTimer),this.destroy({remove:!0})},removeCircleTimer:function(){var t=e.d3.select(".timer > svg");t=t.remove()},drawCircleTimer:function(){var t,n,r,i=2,s=35,o=40,u={},a=this.get("autoplayInterval"),f=".timer",l=this.get("container").one(f),c;u.width=l.get("clientWidth"),u.height=l.get("clientHeight"),t=e.d3.svg.arc().innerRadius(s).outerRadius(o),n=e.d3.scale.linear().range([0,360]).domain([0,360]),r=e.d3.range(n(360)).map(function(e,t){return t*=i,{startAngle:t*(Math.PI/360),endAngle:(t+2)*(Math.PI/360)}}),c=e.d3.select(f).append("svg").attr("class","arc-timer").attr("width",u.width).attr("height",u.height).append("g").attr("transform","translate("+u.width/2+", "+u.height/2+")"),c.append("g").selectAll("path").data(r).enter().append("path").attr("fill",function(e){return"#fff"}).transition().delay(function(e,t){return t*a/r.length}).duration(a/r.length).ease("linear").attrTween("d",function(n){var r=e.d3.interpolate(n.startAngle,n.endAngle);return function(e){return n.endAngle=r(e),t(n)}})},getNextSafePhoto:function(e,t){var n,r,i;n=this.collection.getList(),r=parseInt(this.collection.totalItems,10),t=t||"next";if(t==="next"){e+=1;if(e===r){if(!this.collection.fetchedEnd)return;e=0}}else{e-=1;if(e===-1){if(!this.collection.fetchedEnd)return;e=r-1}}return i=n[e],i?e:e===this.position?-1:this.getNextSafePhoto(e,t)},handlePhotoChange:function(e,t){var r,i,s,o,u,a;r=this.collection.getList(),u=parseInt(this.collection.totalItems,10),s=u-1,e=e||"next",o=this.getNextSafePhoto(this.position,e),o>-1&&(this.position=o),e==="next"?(i=this.position+this.pageParams.perPage,i>s&&(i-=s)):(i=this.position-this.pageParams.perPage,i<0&&(i=s)),a=r[this.position],this.fire("parentViewEvent","slideshowView:newPhoto",a,t),r[i]||(this.pageParams.page=Math.ceil(i/this.pageParams.perPage),this.collection.getPage(this.pageParams).catch(function(e){n.error("Error fetching next page in collection",{err:e})})),this.bufferPhotos(this.position,this.get("bufferSize"),e)},bufferPhotos:function(e,t,n){var r,i,s;s=this.collection.getList(),i=parseInt(this.collection.totalItems,10),n=n||"next";if(t>0){n==="next"?(e+=1,e===i&&(e=0)):(e-=1,e<0&&(e=i-1)),r=s[e];if(r)return this.fire("parentViewEvent","slideshowView:preloadPhoto",r),t-=1,this.bufferPhotos(e,t,n)}return},handleKeys:function(t){var n=t.button;n===37||n===74?(e.rapidTracker.beacon(this.name,"keyboardLeft"),t.halt(),this.handleNavigation("prev",!0)):n===39||n===75||n===13?(e.rapidTracker.beacon(this.name,"keyboardRight"),t.halt(),this.handleNavigation("next",!0)):n===32?(e.rapidTracker.beacon(this.name,"keyboardPause"),t.halt(),this.handlePlayPause(this.get("container").one(".playpause"))):n===27?(e.rapidTracker.beacon(this.name,"keyboardEsc"),t.halt(),this.close()):t.halt()},handleNavigation:function(e,t){this.handlePhotoChange(e,t),clearTimeout(this.movingFadeTimer),this.movingFadeTimer=setTimeout(this.handleMouseIdle.bind(this),this.get("fadeTimer"))},handlePlayPause:function(e){this.showChrome(),this.toggleAutoplay
()},handleClick:function(t){var n=t.target,r;n.hasClass("navigate-target")?(e.rapidTracker.beacon(this.name,"mouseNav"),t.halt(),r=n.getData("direction"),this.handleNavigation(r,!0)):n.hasClass("playpause")?(e.rapidTracker.beacon(this.name,"mousePlayPause"),t.halt(),this.handlePlayPause(n)):n.hasClass("close")&&(e.rapidTracker.beacon(this.name,"mouseClose"),t.halt(),this.close())},getKeyEventScope:function(){return this.name+this._yuid},cycle:function(){clearTimeout(this.timer),this.removeCircleTimer(),this.timer=setTimeout(this.handlePhotoChange.bind(this),this.get("autoplayInterval")),this.drawCircleTimer()},pauseAutoplay:function(){var t=this.get("container").one(".playpause");e.rapidTracker.beacon(this.name,"pauseAutoplay"),clearTimeout(this.timer),this.isPlaying=!1,this.removeCircleTimer(),t.removeClass("playing"),t.addClass("paused")},startAutoplay:function(){var t=this.get("container").one(".playpause");e.rapidTracker.beacon(this.name,"startAutoplay"),this.isPlaying=!0,this.cycle(),t.removeClass("paused"),t.addClass("playing")},toggleAutoplay:function(){this.isPlaying?this.pauseAutoplay():this.startAutoplay()},showChrome:function(){clearTimeout(this.movingFadeTimer),this.isShowingChrome=!0,this.movingFadeTimer=setTimeout(this.handleMouseIdle.bind(this),this.get("fadeTimer")),this.get("container").removeClass("idle")},handleMouseMove:function(e){var t;if(this.isShowingChrome){this.startPoint={x:e.pageX,y:e.pageY},clearTimeout(this.movingFadeTimer),this.movingFadeTimer=setTimeout(this.handleMouseIdle.bind(this),this.get("fadeTimer"));return}this.startPoint?(clearTimeout(this.mouseMoveTimer),clearTimeout(this.initialFadeTimer),t=Math.round(Math.sqrt(Math.pow(this.startPoint.y-e.pageY,2)+Math.pow(this.startPoint.x-e.pageX,2))),t>this.get("chromeTriggerRadius")&&this.showChrome(),this.mouseMoveTimer=setTimeout(this.resetMouseDistance.bind(this),this.get("mouseIdleTimer"))):this.startPoint={x:e.pageX,y:e.pageY}},resetMouseDistance:function(){this.startPoint=null},handleMouseIdle:function(){var t;if(this.startPoint){t=e.one(document.elementFromPoint(this.startPoint.x,this.startPoint.y));if(t&&t.ancestor(function(e){return e.hasClass("chrome")},!0)){this.movingFadeTimer=setTimeout(this.handleMouseIdle.bind(this),this.get("fadeTimer"));return}}this.hideChrome()},hideChrome:function(){this.resetMouseDistance(),this.get("container").addClass("idle"),this.isShowingChrome=!1,clearTimeout(this.movingFadeTimer)},onSubviewEvent:function(e,t){e==="slideshow-well-view"&&t[0]==="photoLoaded"?this.isPlaying&&this.cycle():e!=="slideshow-attribution-view"||t[0]!=="isOpen"&&t[0]!=="personMenuOpen"?e==="slideshow-attribution-view"&&(t[0]==="isClosed"||t[0]==="personMenuClose")&&(this.movingFadeTimer=setTimeout(this.handleMouseIdle.bind(this),this.get("fadeTimer"))):(clearTimeout(this.movingFadeTimer),clearTimeout(this.initialFadeTimer),this.pauseAutoplay())},finishInitialization:function(){!this.finished&&this.get("enableFullscreen")&&this.fullScreenManager.isInFullscreenMode()?this.finished=!0:(this.get("autoplay")&&this.startAutoplay(),this.initialFadeTimer=setTimeout(this.hideChrome.bind(this),1500))},activate:function(){var t=this.get("container");return this.registerEventHandler(t.on("click",this.handleClick,this)),this.registerEventHandler(this.appContext.flapp.before("activeViewChange",this.close.bind(this))),this._params&&(this._params.keyEventScope=this.getKeyEventScope()),this.attachKeyEvent("down:8,13,27,32,37,74,39,75",e.betterThrottle(this.handleKeys.bind(this),100)),this.get("enableFullscreen")&&this.registerEventHandler(this.fullScreenManager.on("exitFullscreen",this.close.bind(this))),this.registerEventHandler(e.one("body").on("mousemove",e.betterThrottle(this.handleMouseMove.bind(this)))),this}},{ATTRS:{autoplay:{value:!0},autoplayInterval:{value:5e3},fadeTimer:{value:2e3},mouseIdleTimer:{value:200},chromeTriggerRadius:{value:30},bufferSize:{value:2},enableFullscreen:{value:!0}}})},"@VERSION@",{requires:["flickr-view","hermes-template-slideshow","slideshow-attribution-view","slideshow-well-view"],optionalRequires:["fluid-fullscreen"],langBundles:["common","photo-page-scrappy"]});
YUI.add("fluid-fullscreen",function(e){"use strict";function t(){this.fullscreenChangeHandler.detach(),this.webkitFullscreenChangeHandler.detach(),this.mozFullscreenChangeHandler.detach(),this.msFullscreenChangeHandler.detach()}function n(){this.isInFullscreenMode()?this.fire("enterFullscreen"):this.fire("exitFullscreen")}function r(){var t=e.config.doc;return t.fullscreenEnabled||t.webkitFullscreenEnabled||t.mozFullScreenEnabled||t.msFullscreenEnabled}function i(t){var n=e.config.doc,i=n.documentElement;t&&(i=t.getDOMNode());if(r()){if(i.requestFullscreen)return i.requestFullscreen();if(i.webkitRequestFullscreen)return i.webkitRequestFullscreen();if(i.mozRequestFullScreen)return i.mozRequestFullScreen();if(i.msRequestFullscreen)return i.msRequestFullscreen()}return!1}function s(){var t=e.config.doc;return t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement}function o(){var t=e.config.doc;if(s()){if(t.exitFullscreen)return t.exitFullscreen();if(t.webkitExitFullscreen)return t.webkitExitFullscreen();if(t.mozCancelFullScreen)return t.mozCancelFullScreen();if(t.msExitFullscreen)return t.msExitFullscreen()}return!1}e.mix(e.Node.DOM_EVENTS,{fullscreenchange:!0,webkitfullscreenchange:!0,mozfullscreenchange:!0,MSFullscreenChange:!0}),e.namespace("fluid").Fullscreen=function(){this.fullscreenChangeHandler=e.on("fullscreenchange",this.handleFullscreenChange.bind(this)),this.webkitFullscreenChangeHandler=e.on("webkitfullscreenchange",this.handleFullscreenChange.bind(this)),this.mozFullscreenChangeHandler=e.on("mozfullscreenchange",this.handleFullscreenChange.bind(this)),this.msFullscreenChangeHandler=e.on("MSFullscreenChange",this.handleFullscreenChange.bind(this)),this.publish("enterFullscreen"),this.publish("exitFullscreen")},e.fluid.Fullscreen.prototype={isFullscreenCapable:r,isInFullscreenMode:s,enterFullscreen:i,exitFullscreen:o,handleFullscreenChange:n,destroy:t},e.augment(e.fluid.Fullscreen,e.EventTarget,!0,null,{prefix:"fullscreen"})},"@VERSION@",{requires:["event-custom"],optional:[],affinity:"client"});
YUI.add("fluid-magic-slideshow-view",function(e){e.namespace("Views")[this.name]=e.Base.create("fluid-magic-slideshow-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.nsid=t.nsid,this.modelParams=t.photoListConfig.modelParams,this.pageParams=t.pageParams,this.modelParams.fetchParams&&(this.pageParams=e.merge(this.modelParams.fetchParams,this.pageParams)),this.pageParams.viewPageSize?this.positionMultipler=this.pageParams.viewPageSize:this.positionMultipler=this.pageParams.perPage,this},loadState:function(){var e=this;return this.appContext.getModel(this.modelParams.registryName,this.modelParams.modelIdOrAttributes,this.modelParams.fetchParams).then(function(t){e.position=(e.pageParams.nominalPage-1)*e.positionMultipler||0,e.collection=t.getValue("photoPageList"),e.isEnabled=e.collection.totalItems>0}).catch(function(e){})},buildContainer:function(){return this.setContainerWithTemplate("fluid-magic-slideshow",{isEnabled:this.isEnabled}),this},toggleSlideshow:function(t){var n;e.rapidTracker.beacon(this.name,"launchSlideshow"),t.halt(),n=new e.Views.Slideshow({appContext:this.appContext,collection:this.collection,pageParams:this.pageParams,position:this.position}),n.show()},activate:function(){return this.isEnabled&&this.registerEventHandler(this.get("container").one(".slideshow-toggle").on("click",this.toggleSlideshow.bind(this))),this}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-fluid-magic-slideshow","slideshow-view"],langBundles:["common"]});
YUI.add("album-toolbar-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"fluid-magic-slideshow-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0}},initializer:function(e){return this.albumId=e.albumId,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,this.nsidOrPathAlias=e.nsidOrPathAlias,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var e=this;return e.appContext.getModel("set-models",e.albumId).then(function(t){e.set("albumModel",t)})},buildContainer:function(){var e=this.get("albumModel"),t=e.id,n=!1;return this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===e.getValue("owner").id&&(n=!0),this.setContainerWithTemplate("album-toolbar",{nsidOrPathAlias:this.nsidOrPathAlias,viewerIsOwner:n,setId:t,isJustifiedLayout:this.albumPhotoListLayoutStyle==="justified",isStoryLayout:this.albumPhotoListLayoutStyle==="story"}),this},buildErrorContainer:function(){},activate:function(){var t=this.get("container"),n=this;return this.registerEventHandler(t.all(".layout").on("click",function(r){r.preventDefault();var i=r.target.getAttribute("data-layout");i!==n.layoutStyle&&(t.one(".selected").removeClass("selected"),r.target.addClass("selected"),e.fire("albumToolbarView:layoutChange",i),n.layoutStyle=i)})),this}})},"@VERSION@",{requires:["flickr-view","hermes-template-album-toolbar","fluid-magic-slideshow-view"],optional:[],langBundles:["album-page"]});
YUI.add("hermes-template-album-header",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing;return'		<span class="edit-cover-photo" title="'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"album-page.EDIT_COVER"},data:i}))+'">\n			<i></i>\n		</span>\n'+((s=(n.isFlipped||t&&t.isFlipped||u).call(o,"enable-change-album-sorting",{name:"isFlipped",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))!=null?s:"")},2:function(e,t,n,r,i){return'			<span class="change-album-sorting">\n				'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"album-page.SORT"},data:i}))+"<i></i>\n			</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<div class="album-header-content" style="height: '+l((o=(o=n.height||(t!=null?t.height:t))!=null?o:a,typeof o===f?o.call(u,{name:"height",hash:{},data:i}):o))+"px; background-image: url("+l((o=(o=n["cover-photo-url"]||(t!=null?t["cover-photo-url"]:t))!=null?o:a,typeof o===f?o.call(u,{name:"cover-photo-url",hash:{},data:i}):o))+');">\n\n	<div class="dimming-shim"></div>\n	<div class="flex-padding"></div>\n\n'+((s=n["if"].call(u,t!=null?t.viewerIsOwner:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n	"+l((n.outlet||t&&t.outlet||a).call(u,t!=null?t["album-title-desc-view"]:t,{name:"outlet",hash:{},data:i}))+"\n	"+l((n.outlet||t&&t.outlet||a).call(u,t!=null?t["album-stats-view"]:t,{name:"outlet",hash:{},data:i}))+"\n	"+l((n.outlet||t&&t.outlet||a).call(u,t!=null?t["album-engagement-view"]:t,{name:"outlet",hash:{},data:i}))+'\n	<div class="flex-padding"></div>\n\n	'+l((n.outlet||t&&t.outlet||a).call(u,t!=null?t["attribution-view"]:t,{name:"outlet",hash:{},data:i}))+"\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/album-header",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-album-title-desc",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return"editable"},3:function(e,t,n,r,i){return'		<span class="title-desc-edit" data-action="edit" title="'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.EDIT"},data:i}))+'"></span>\n'},5:function(e,t,n,r,i){return"description-placeholder"},7:function(e,t,n,r,i){return"			"+e.escapeExpression((n.renderTrustedMarkup||t&&t.renderTrustedMarkup||n.helperMissing).call(t!=null?t:{},t!=null?t.description:t,{name:"renderTrustedMarkup",hash:{},data:i}))+"\n"},9:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.canEdit:t,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:""},10:function(e,t,n,r,i){return"				"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"album-page.ALBUM_ADD_DESCRIPTION"},data:i}))+"\n"},12:function(e,t,n,r,i){return'	<button class="done-editing-album-title-desc hidden" data-action="saveAlbumTitleDescEdit">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.DONE"},data:i}))+"</button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return'<div class="title-desc-block '+((s=n["if"].call(u,t!=null?t.canEdit:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n	<div class="'+((s=n["if"].call(u,t!=null?t.canEdit:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+' album-title">\n		'+f((o=(o=n.title||(t!=null?t.title:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"title",hash:{},data:i}):o))+"\n	</div>\n\n"+((s=n["if"].call(u,t!=null?t.canEdit:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n	<input type="text" class="meta-field edit-meta-field edit-album-title" wrap="on"></input>\n\n	<div class="'+((s=n["if"].call(u,t!=null?t.canEdit:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+" album-desc "+((s=n.unless.call(u,t!=null?t.description:t,{name:"unless",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n'+((s=n["if"].call(u,t!=null?t.description:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.program(9,i,0),data:i}))!=null?s:"")+'	</div>\n\n	<div class="description-show-more hidden">\n		<span class="description-show-more-link '+((s=n["if"].call(u,t!=null?t.canEdit:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" data-action="showMore">\n			'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"common.SHOW_MORE"},data:i}))+'\n		</span>\n	</div>\n\n	<textarea class="meta-field edit-meta-field edit-album-desc" wrap="on"></textarea>\n</div>\n\n'+((s=n["if"].call(u,t!=null?t.canEdit:t,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))!=null?s:"")},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/album-title-desc",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("album-title-desc-view",function(e){var t={bigFont:"26px",smallFont:"18px",heightOfOneLineOfTextUsingBigFont:29,maxNumberOfLinesOfDescriptionToShow:2,maxNumberOfLinesOfDescriptionToShowJustified:1,maxNumberOfLinesOfDescriptionToShowInEditField:4,currentDescriptionEditableFieldHeight:29,heightOfOneLineOfTextWhenJustified:29};e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.albumId=e.albumId,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var e=this;return e.appContext.getModel("set-models",e.albumId).then(function(t){e.set("albumModel",t)})},wrapDescription:function(e){var t;return e=e.split("\n"),t=e.length,t>1&&e.forEach(function(e,t,n){n[t]=e+"<br>"}),e.join("")},doneEditingTitleDescription:function(){var n=this,r=this.get("albumModel"),i,s,o=n.intlMessage({intlName:"album-page.ALBUM_ADD_DESCRIPTION"}),u=r.getValue("title").trim(),a=r.getValue("description").trim(),f=this.get("container"),l=f.one(".album-desc"),c=f.one(".album-title"),h=f.one(".edit-album-desc"),p=f.one(".edit-album-title"),d=f.one(".done-editing-album-title-desc");f.removeClass("editing"),i=p.get("value").trim(),i===""&&(i=u),h.get("value")!==o?s=h.get("value").trim():s="",d.addClass("hidden"),n.fire("subviewViewEvent","albumTitleDesc:doneEditing"),i!==u||s!==a?(r.setValue("title",i),r.setValue("description",s),e.rapidTracker.beacon(n.name,"albumTitleDescriptionSave"),r.remoteUpdate().then(function(){var e=r.getValue("title"),i=r.getValue("description");c.set("text",e),i.trim()!==""?(l.removeClass("description-placeholder"),i=n.wrapDescription(i),l.setHTML(i)):(l.addClass("description-placeholder"),l.setHTML(o)),p.removeClass("show-editable"),h.removeClass("show-editable"),c.removeClass("hidden"),l.removeClass("hidden"),f.hasClass("justified")?n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified):n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow)},function(e){r.setValue("title",u),r.setValue("description",a),c.set("text",u),a.trim()!==""?(l.removeClass("description-placeholder"),l.setHTML(a)):(l.addClass("description-placeholder"),l.setHTML(o)),p.removeClass("show-editable"),h.removeClass("show-editable"),c.removeClass("hidden"),l.removeClass("hidden"),f.hasClass("justified")?n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified):n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow),n.onError(n.intlMessage({intlName:"album-page.ERROR_UPDATING_ALBUM_TITLE_DESCRIPTION"}))})):(p.removeClass("show-editable"),h.removeClass("show-editable"),c.removeClass("hidden"),s.trim()===""?(l.addClass("description-placeholder"),l.setHTML(o)):(s=n.wrapDescription(s),l.removeClass("description-placeholder"),l.setHTML(s)),l.removeClass("hidden"),f.hasClass("justified")?n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified):n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow)),f.hasClass("justified")&&t.currentDescriptionEditableFieldHeight!==t.heightOfOneLineOfTextWhenJustified&&(n.fire("subviewViewEvent","albumTitleDescEditing:heightChange",t.heightOfOneLineOfTextWhenJustified-t.currentDescriptionEditableFieldHeight),t.currentDescriptionEditableFieldHeight=t.heightOfOneLineOfTextWhenJustified)},editTitleDescription:function(t){var n=this,r=this.get("container"),i=n.intlMessage({intlName:"album-page.ALBUM_ADD_DESCRIPTION"}),s=r.one(".album-title"),o,u=r.one(".edit-album-desc"),a=r.one(".edit-album-title"),f=this.get("albumModel"),l=f.getValue("title"),c=f.getValue("description").trim(),h,p=r.one(".description-show-more"),d=r.one(".done-editing-album-title-desc");(t.target.hasClass("editable album-title")||t.target.hasClass("editable album-desc")||t.target.ancestor().hasClass("editable album-desc")||t.target.hasClass("title-desc-edit")||t.target.hasClass("description-show-more-link editable")||t.target.hasClass("title-desc-block editable"))&&t.target.get("tagName").toLowerCase()!=="a"&&(t.preventDefault(),t.stopPropagation(),r.addClass("editing"),p.addClass("hidden"),n.fire("subviewViewEvent","albumTitleDesc:editing"),d.removeClass("hidden"),o=s.getXY(),a.set("value",l),a.setStyle("height",s.get("offsetHeight")),a.setStyle("width",s.get("offsetWidth")),a.setStyle("left",o[0]),a.setStyle("top",o[1]),s.addClass("hidden"),a.addClass("show-editable"),c?(h=c.replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<"),u.removeClass("description-placeholder")):(h=i,u.addClass("description-placeholder")),u.set("value",h),n.makeDescriptionEditFieldResponsive(),t.target.hasClass("editable album-title")?a.focus():u.focus(),e.rapidTracker.beacon(n.name,"albumTitleDescriptionEdit"))},makeDescriptionEditFieldResponsive:function(){var e=this,n=this.get("container"),r=n.one(".album-desc"),i,s,o,u,a=n.one(".edit-album-desc"),f=a.get("value"),l,c=!1;n.hasClass("justified")&&(c=!0),f?(f=f.replace(/"/g,"&quot;").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),f=e.wrapDescription(f),r.addClass("calculating").removeClass("hidden"),r.setHTML(f),s=parseInt(r.getComputedStyle("height"),10),s>t.heightOfOneLineOfTextUsingBigFont*t.maxNumberOfLinesOfDescriptionToShowInEditField?a.setStyle("height",t.heightOfOneLineOfTextUsingBigFont*t.maxNumberOfLinesOfDescriptionToShowInEditField):a.setStyle("height",s),c&&(l=parseInt(a.getComputedStyle("height"),10),l!==t.currentDescriptionEditableFieldHeight&&(i=l-t.currentDescriptionEditableFieldHeight,e.fire("subviewViewEvent","albumTitleDescEditing:heightChange",i),t.currentDescriptionEditableFieldHeight=l)),o=r.get("offsetWidth"),u=r.getXY(),a.setStyle("width",o),a.setStyle("left",u[0]),a.setStyle("top",u[1]),r.addClass("hidden").removeClass("calculating"),a.addClass("show-editable")):(a.setStyle("height",t.heightOfOneLineOfTextUsingBigFont),r.addClass("hidden").removeClass("calculating"))},displayShowMoreIfNeeded
:function(e){var n=this.get("container"),r,i=n.one(".album-desc"),s=n.one(".title-desc-block"),o=n.one(".description-show-more");i&&(r=i.cloneNode(!0),r.removeClass("album-desc"),r.addClass("album-desc-calculator"),s.append(r),parseInt(r.getComputedStyle("height"),10)>t.heightOfOneLineOfTextUsingBigFont*e?o.removeClass("hidden"):o.addClass("hidden"),r.remove(!0))},showMoreClick:function(t){var n=this,r=this.get("albumModel"),i=r.getValue("description"),s=this.get("container").one(".description-show-more"),o;i=n.wrapDescription(i),t.target.hasClass("editable")?(s.addClass("hidden"),n.editTitleDescription(t)):(o=new e.Views.FluidModal({appContext:n.appContext,title:n.intlMessage({intlName:"album-page.ALBUM_DESCRIPTION"}),message:i,actionButtonLabel:n.intlMessage({intlName:"common.OK"}),showCancelButton:!1,classList:"album-full-description"}),o.show())},buildContainer:function(){var e=this,t=this.get("albumModel"),n=t.getValue("title"),r=t.getValue("description"),i=t.getValue("isAutoUploadSet"),s=!1,o=!1,u=this.get("container");return r.trim()!==""&&(o=!0,this.albumPhotoListLayoutStyle==="justified"&&u.addClass("justified"),r=e.wrapDescription(r)),this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===t.getValue("owner").id&&!i&&(s=!0),this.setContainerWithTemplate("album-title-desc",{title:n,description:r,hasDescription:o,canEdit:s}),this},buildErrorContainer:function(){},activate:function(){var n=this,r=this.get("albumModel"),i=this.get("container"),s=n.intlMessage({intlName:"album-page.ALBUM_ADD_DESCRIPTION"}),o=i.one(".title-desc-block"),u=i.one(".edit-album-title"),a=i.one(".edit-album-desc"),f=i.one(".title-desc-edit"),l=i.one(".description-show-more-link"),c=!1;return this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===r.getValue("owner").id&&(c=!0),i.hasClass("justified")?n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified):n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow),c&&!r.getValue("isAutoUploadSet")&&(n.registerEventHandler(o.on("click",function(e){n.editTitleDescription(e)},o)),n.registerEventHandler(f.on("click",function(e){n.editTitleDescription(e)},f))),n.registerEventHandler(l.on("click",function(e){n.showMoreClick(e)},l)),this.registerEventHandler(u.on("keyup",function(e){e.keyCode===13&&n.doneEditingTitleDescription()},this)),this.registerEventHandler(u.on("blur",function(t){setTimeout(function(){try{!e.config.doc.activeElement.isEqualNode(u.getDOMNode())&&!e.config.doc.activeElement.classList.contains("edit-album-desc")&&n.doneEditingTitleDescription()}catch(t){}},1,u)},this)),this.registerEventHandler(a.on("keyup",function(e){n.makeDescriptionEditFieldResponsive()},this)),this.registerEventHandler(a.on("blur",function(t){a.get("value").trim()===""?(a.addClass("description-placeholder"),a.set("value",s)):a.removeClass("description-placeholder"),setTimeout(function(){try{!e.config.doc.activeElement.isEqualNode(a.getDOMNode())&&!e.config.doc.activeElement.classList.contains("edit-album-title")&&n.doneEditingTitleDescription()}catch(t){}},1,a)},this)),this.registerEventHandler(a.on("focus",function(){a.get("value").trim()===s&&(a.removeClass("description-placeholder"),a.set("value",""))},this)),e.on("albumToolbarView:layoutChange",function(e){e==="justified"?(i.addClass("justified"),n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified)):(i.removeClass("justified"),n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow))}),this},onError:function(t){return this.errorDialog=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelButton:!1,title:this.intlMessage({intlName:"common.OOPS"}),actionButtonLabel:this.intlMessage({intlName:"common.OK"}),message:t,darkOverlay:!0}),this.errorDialog.show(),this.errorDialog}})},"@VERSION@",{requires:["flickr-view","hermes-template-album-title-desc","handlebars-helpers"],optional:[],langBundles:["common","album-page"]});
YUI.add("hermes-template-album-stats",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return'		<span class="photo-counts">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{selectedCount:t!=null?t.photosArePresent:t,intlName:"album-page.PHOTOS_COUNT"},data:i}))+"</span>\n"},3:function(e,t,n,r,i){var s,o=t!=null?t:{};return((s=n["if"].call(o,t!=null?t.photosArePresent:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))!=null?s:"")+'		<span class="video-counts">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{selectedCount:t!=null?t.videosArePresent:t,intlName:"album-page.VIDEOS_COUNT"},data:i}))+"</span>\n"},4:function(e,t,n,r,i){return'			<span class="album-stats-separator">&middot;</span>\n'},6:function(e,t,n,r,i){return'		<span class="album-stats-separator">&middot;</span>\n		<span class="view-counts">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{selectedCount:t!=null?t.viewsArePresent:t,intlName:"album-page.VIEWS_COUNT"},data:i}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<div class="stats-container">\n'+((s=n["if"].call(o,t!=null?t.photosArePresent:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.videosArePresent:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.viewsArePresent:t,{name:"if",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))!=null?s:"")+"</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/album-stats",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("album-stats-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.albumId=e.albumId,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var e=this;return e.appContext.getModel("set-models",e.albumId).then(function(t){e.set("albumModel",t)})},buildContainer:function(){var e=this.get("albumModel"),t=e.getValue("photoCount"),n=e.getValue("videoCount"),r=e.getValue("viewCount"),i=this.get("container");return this.albumPhotoListLayoutStyle==="justified"&&i.addClass("justified"),this.setContainerWithTemplate("album-stats",{photosArePresent:t,videosArePresent:n,viewsArePresent:r}),this},buildErrorContainer:function(){},activate:function(){return this},onParentViewEvent:function(e,t){var n=this,r=n.get("container");if(e==="album-stats-view"&&t[0]==="albumHeaderView:editing")return r.addClass("invisible"),!1;if(e==="album-stats-view"&&t[0]==="albumHeaderView:doneEditing")return r.removeClass("invisible"),!1}})},"@VERSION@",{requires:["flickr-view","hermes-template-album-stats"],optional:[],langBundles:["common","album-page"]});
YUI.add("hermes-template-album-engagement",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return'	<div class="create-book-container">\n		<span class="create-book-icon" title="'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"album-page.CREATE_BOOK_FROM_ALBUM"},data:i}))+'"></span>\n	</div>\n'},3:function(e,t,n,r,i){return'	<div class="download-album-container">\n		<span class="download-album-icon"></span>\n	</div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(o,t!=null?t["fluid-share-album-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n"+((s=n["if"].call(o,t!=null?t.viewerIsOwner:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n\n"+((s=n["if"].call(o,t!=null?t.enableDownload:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/album-engagement",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("album-engagement-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.albumId=e.albumId,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.doOffline=!!this.appContext.flipper.isFlipped("enable-offline-downloadr"),this},subviewConfig:{"fluid-share-album-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,parentViewName:this.name}},loadState:function(){var e=this;return e.appContext.getModel("set-models",e.albumId).then(function(t){e.set("albumModel",t)})},createBookFromAlbum:function(){var t=this;t.appContext.getModelRegistry("book-models").then(function(n){return n.remoteCreate({photoset_id:t.albumId}).then(function(n){e.rapidTracker.beacon(t.name,"photobookFromAlbum"),t.appContext.flapp.navigate("/create/books/"+n.id+"/cover")})},function(e){t.onError(t.intlMessage({intlName:"album-page.ERROR_CREATING_PHOTOBOOK_FROM_ALBUM"}))})},buildContainer:function(){var e=this.get("container"),t=this.get("albumModel"),n=!1,r={};this.albumPhotoListLayoutStyle==="justified"&&e.addClass("justified"),this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===t.getValue("owner").id&&(n=!0),r.viewerIsOwner=n,r.enableDownload=!1;if(this.appContext.flipper.isFlipped("enable-just-your-album-download")&&n||this.appContext.flipper.isFlipped("enable-album-download")&&t.getValue("canDownload"))r.enableDownload=!0;return this.subviews["fluid-share-album-view"]&&(r["fluid-share-album-view"]=this.subviews["fluid-share-album-view"].get("container"),(r.viewerIsOwner||r["enable-download"])&&r["fluid-share-album-view"].addClass("not-alone")),this.setContainerWithTemplate("album-engagement",r),this},buildErrorContainer:function(){},activate:function(){var t=this,n=this.get("container"),r=n.one(".create-book-container"),i=n.one(".download-album-container");return r&&t.registerEventHandler(r.on("click",function(){t.createBookFromAlbum()})),i&&(this.bulkDownloaderView=new e.BulkDownloaderView({appContext:this.appContext,doOffline:this.doOffline}),t.registerEventHandler(i.on("click",t.downloadAlbum.bind(this)))),this},destructor:function(){this.bulkDownloaderView&&this.bulkDownloaderView.destroy()},downloadAlbum:function(t){var n=this,r=this.get("albumModel"),i,s;e.rapidTracker.beacon(this.name,"openDownloadAlbum"),this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===r.getValue("owner").id&&this.bulkDownloaderView.set("isOwnAlbum",!0),this.doOffline?(i=n.bulkDownloaderView.createTitle(r.getValue("photoCount"),r.getValue("videoCount")),n.bulkDownloaderView.showDownloadDialog({doOffline:!0,title:i,setID:this.albumId})):(s=this.bulkDownloaderView.showLoadingDialog(),this.bulkDownloaderView.prepareArchive({set_id:this.albumId}).then(function(e){s.close(),n.bulkDownloaderView.showDownloadDialog(e)}).catch(function(e){s.close(),n.onError(e)}))},onParentViewEvent:function(e,t){var n=this,r=n.get("container");if(e==="album-engagement-view"&&t[0]==="albumHeaderView:editing")return r.addClass("invisible"),!1;if(e==="album-engagement-view"&&t[0]==="albumHeaderView:doneEditing")return r.removeClass("invisible"),!1},onError:function(t){return this.errorDialog=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelButton:!1,title:this.intlMessage({intlName:"common.OOPS"}),actionButtonLabel:this.intlMessage({intlName:"common.OK"}),message:t,darkOverlay:!0}),this.errorDialog.show(),this.errorDialog}})},"@VERSION@",{requires:["flickr-view","hermes-template-album-engagement","hermes-template-flickr-balls"],optionalRequires:["bulk-downloader-view"],optional:["fluid-share-album-view"],langBundles:["common","album-page"]});
YUI.add("hermes-template-photo-list-photo-interaction",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return e.escapeExpression(e.lambda((s=t!=null?t.photo:t)!=null?s.title:s,t))},3:function(e,t,n,r,i){return e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.UNTITLED"},data:i}))},5:function(e,t,n,r,i){return" "+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.BY_YOU"},data:i}))},7:function(e,t,n,r,i){var s;return" "+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{user:(s=(s=t!=null?t.photo:t)!=null?s.owner:s)!=null?s.username:s,intlName:"common.BY_USER"},data:i}))},9:function(e,t,n,r,i){var s,o=t!=null?t:{};return'		<div class="extra-tools">\n'+((s=n["if"].call(o,t!=null?t.removeToolClass:t,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.bigScotchTitle:t,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(o,t!=null?t.moreMenuItems:t,{name:"if",hash:{},fn:e.program(14,i,0),inverse:e.noop,data:i}))!=null?s:"")+"		</div>\n"},10:function(e,t,n,r,i){var s,o,u=e.escapeExpression;return'				<div class="extra-tool remove-photo '+u((o=(o=n.removeToolClass||(t!=null?t.removeToolClass:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(t!=null?t:{},{name:"removeToolClass",hash:{},data:i}):o))+'" data-id='+u(e.lambda((s=t!=null?t.photo:t)!=null?s.id:s,t))+"></div>\n"},12:function(e,t,n,r,i){var s,o,u=e.escapeExpression;return'				<div class="extra-tool big-scotch" data-id='+u(e.lambda((s=t!=null?t.photo:t)!=null?s.id:s,t))+' title="'+u((o=(o=n.bigScotchTitle||(t!=null?t.bigScotchTitle:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(t!=null?t:{},{name:"bigScotchTitle",hash:{},data:i}):o))+'"></div>\n'},14:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return'				<div class="extra-tool more-menu" data-menu-items="'+f((o=(o=n.moreMenuItems||(t!=null?t.moreMenuItems:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"moreMenuItems",hash:{},data:i}):o))+'" data-id='+f(e.lambda((s=t!=null?t.photo:t)!=null?s.id:s,t))+' title="'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"common.MORE"},data:i}))+'"></div>\n'},16:function(e,t,n,r,i){return" narrow"},18:function(e,t,n,r,i){var s,o=t!=null?t:{};return((s=n["if"].call(o,(s=t!=null?t.photo:t)!=null?s.title:s,{name:"if",hash:{},fn:e.program(19,i,0),inverse:e.program(21,i,0),data:i}))!=null?s:"")+((s=n["if"].call(o,(s=(s=t!=null?t.photo:t)!=null?s.owner:s)!=null?s.displayname:s,{name:"if",hash:{},fn:e.program(23,i,0),inverse:e.program(29,i,0),data:i}))!=null?s:"")},19:function(e,t,n,r,i){var s,o,u=e.escapeExpression;return'					<a href="'+u((o=(o=n.photoPageUrl||(t!=null?t.photoPageUrl:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(t!=null?t:{},{name:"photoPageUrl",hash:{},data:i}):o))+'" class="title" tabindex="-1">'+u(e.lambda((s=t!=null?t.photo:t)!=null?s.title:s,t))+"</a>\n"},21:function(e,t,n,r,i){return'					<span class="title empty"> </span>\n'},23:function(e,t,n,r,i){var s;return'					<a href="'+e.escapeExpression(e.lambda((s=(s=t!=null?t.photo:t)!=null?s.owner:s)!=null?s.url:s,t))+'" class="attribution">\n'+((s=(n.photoAttribution||t&&t.photoAttribution||n.helperMissing).call(t!=null?t:{},t!=null?t.photo:t,t!=null?t.flippers:t,{name:"photoAttribution",hash:{},fn:e.program(24,i,0),inverse:e.noop,data:i}))!=null?s:"")+"					</a>\n"},24:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.intlName:t,{name:"if",hash:{},fn:e.program(25,i,0),inverse:e.program(27,i,0),data:i}))!=null?s:""},25:function(e,t,n,r,i){return"								"+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{user:t!=null?t.user:t,intlName:t!=null?t.intlName:t},data:i}))+"\n"},27:function(e,t,n,r,i){var s;return"								"+e.escapeExpression((s=(s=n.user||(t!=null?t.user:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"user",hash:{},data:i}):s))+"\n"},29:function(e,t,n,r,i){return'					<span class="attribution empty"> </span>\n'},31:function(e,t,n,r,i){return'				<span class="title empty"> </span>\n				<span class="attribution empty"> </span>\n'},33:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return'		<div class="tool'+((s=n["if"].call(u,t!=null?t.isNarrow:t,{name:"if",hash:{},fn:e.program(34,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n			<a href="'+e.escapeExpression((o=(o=n.photoPageUrl||(t!=null?t.photoPageUrl:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"photoPageUrl",hash:{},data:i}):o))+'" class="fave-area" '+((s=n["if"].call(u,t!=null?t.isFaved:t,{name:"if",hash:{},fn:e.program(36,i,0),inverse:e.program(38,i,0),data:i}))!=null?s:"")+" "+((s=n.unless.call(u,t!=null?t.canFave:t,{name:"unless",hash:{},fn:e.program(40,i,0),inverse:e.noop,data:i}))!=null?s:"")+'>\n				<i class="fave-star'+((s=n["if"].call(u,t!=null?t.isFaved:t,{name:"if",hash:{},fn:e.program(42,i,0),inverse:e.program(44,i,0),data:i}))!=null?s:"")+((s=n.unless.call(u,t!=null?t.canFave:t,{name:"unless",hash:{},fn:e.program(46,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"></i>'+((s=n["if"].call(u,t!=null?t.faveCount:t,{name:"if",hash:{},fn:e.program(48,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n			</a>\n		</div>\n"},34:function(e,t,n,r,i){return" lonely"},36:function(e,t,n,r,i){return'aria-label="'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"fave-view.UNFAVE_PHOTO"},data:i}))+'"'},38:function(e,t,n,r,i){return'aria-label="'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.ADD_TO_FAVORITES"},data:i}
))+'"'},40:function(e,t,n,r,i){return'tabindex="-1"'},42:function(e,t,n,r,i){return" faved"},44:function(e,t,n,r,i){return" fave"},46:function(e,t,n,r,i){return" can-not-fave"},48:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},t!=null?t.faveCount:t,{name:"if",hash:{},fn:e.program(49,i,0),inverse:e.noop,data:i}))!=null?s:""},49:function(e,t,n,r,i){var s;return'<span class="icon-count">'+e.escapeExpression((s=(s=n.faveCount||(t!=null?t.faveCount:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"faveCount",hash:{},data:i}):s))+"</span>"},51:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return'		<div class="tool">\n			<a href="'+f((o=(o=n.photoPageUrl||(t!=null?t.photoPageUrl:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"photoPageUrl",hash:{},data:i}):o))+'#comments" class="comment-area" aria-label="'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.PLURAL_COMMENT"},data:i}))+'">\n				<i class="comments"></i>'+((s=n["if"].call(u,t!=null?t.commentCount:t,{name:"if",hash:{},fn:e.program(52,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n			</a>\n		</div>\n"},52:function(e,t,n,r,i){var s;return'<span class="icon-count">'+e.escapeExpression((s=(s=n.commentCount||(t!=null?t.commentCount:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"commentCount",hash:{},data:i}):s))+"</span>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{};return'<div class="photo-list-photo-interaction">\n	<a class="overlay" href="'+e.escapeExpression((o=(o=n.photoPageUrl||(t!=null?t.photoPageUrl:t))!=null?o:n.helperMissing,typeof o=="function"?o.call(u,{name:"photoPageUrl",hash:{},data:i}):o))+'" tabindex="0" role="heading" aria-level="3" aria-label="'+((s=n["if"].call(u,(s=t!=null?t.photo:t)!=null?s.title:s,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+((s=n["if"].call(u,(s=t!=null?t.photo:t)!=null?s.isOwner:s,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i}))!=null?s:"")+'"></a>\n'+((s=n["if"].call(u,t!=null?t.hasExtraFunctionality:t,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:"")+'	<div class="interaction-bar'+((s=n["if"].call(u,t!=null?t.isNarrow:t,{name:"if",hash:{},fn:e.program(16,i,0),inverse:e.noop,data:i}))!=null?s:"")+'" title="'+((s=n["if"].call(u,(s=t!=null?t.photo:t)!=null?s.title:s,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+((s=n["if"].call(u,(s=t!=null?t.photo:t)!=null?s.isOwner:s,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.program(7,i,0),data:i}))!=null?s:"")+'">\n		<div class="text">\n'+((s=n["if"].call(u,t!=null?t.displayTitleAndAttribution:t,{name:"if",hash:{},fn:e.program(18,i,0),inverse:e.program(31,i,0),data:i}))!=null?s:"")+"		</div>\n\n"+((s=n["if"].call(u,t!=null?t.displayFaveIcon:t,{name:"if",hash:{},fn:e.program(33,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,t!=null?t.displayComments:t,{name:"if",hash:{},fn:e.program(51,i,0),inverse:e.noop,data:i}))!=null?s:"")+"	</div>\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-list-photo-interaction",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
